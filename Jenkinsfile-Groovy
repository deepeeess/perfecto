#!/usr/bin/env groovy
properties([gitLabConnection('deepeeess-gitlab')])
node {
  docker.image('ruby:2.3.4').inside {
    stage('\u2776 init') {
      echo "\u273F environment"
      echo sh(returnStdout: true, script: 'env')
    }

    stage('\u2777 checkout') {
      checkout scm
      echo "\u273F git status"
      sh 'git status'
      echo "\u273F git branch"
      sh 'git branch'
    }

    stage("build") {
      gitlabCommitStatus("build") {
        echo "\u2600 BUILD_URL=${env.BUILD_URL}"
      }
    }

    stage("test") {
      gitlabCommitStatus("test") {
        // your test steps
      }
    }
  }
}
